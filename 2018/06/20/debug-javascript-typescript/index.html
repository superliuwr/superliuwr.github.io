<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Debug Javascript/TypeScript | SUPERLOG</title>
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="JavaScript/TypeScript DebuggingNode.js 6.3 introduced the “inspect” and “inspect-brk” CLI arguments that make node to listen via WebSockets for diagnostic commands as defined by the Chrome Debugging P">
<meta name="keywords" content="Node.js,Debug">
<meta property="og:type" content="article">
<meta property="og:title" content="Debug Javascript&#x2F;TypeScript">
<meta property="og:url" content="http://superliuwr.github.io/2018/06/20/debug-javascript-typescript/index.html">
<meta property="og:site_name" content="SUPERLOG">
<meta property="og:description" content="JavaScript/TypeScript DebuggingNode.js 6.3 introduced the “inspect” and “inspect-brk” CLI arguments that make node to listen via WebSockets for diagnostic commands as defined by the Chrome Debugging P">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-06-20T14:16:46.672Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Debug Javascript&#x2F;TypeScript">
<meta name="twitter:description" content="JavaScript/TypeScript DebuggingNode.js 6.3 introduced the “inspect” and “inspect-brk” CLI arguments that make node to listen via WebSockets for diagnostic commands as defined by the Chrome Debugging P">
  
    <link rel="alternative" href="/atom.xml" title="SUPERLOG" type="application/atom+xml">
  
  
    <link rel="icon" href="images/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>
<body>
  <div id="container">
    <div class="mobile-nav-panel">
	<i class="icon-reorder icon-large"></i>
</div>
<header id="header">
	<h1 class="blog-title">
		<a href="/">SUPERLOG</a>
	</h1>
	<nav class="nav">
		<ul>
			<li><a href="/">Home</a></li><li><a href="/categories/">Categories</a></li><li><a href="/tags/">Tags</a></li><li><a href="/archives">Archives</a></li><li><a href="/about">About</a></li>
			<li><a id="nav-search-btn" class="nav-icon" title="Search"></a></li>
			<li><a href="/atom.xml" id="nav-rss-link" class="nav-icon" title="RSS Feed"></a></li>
		</ul>
	</nav>
	<div id="search-form-wrap">
		<form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://superliuwr.github.io"></form>
	</div>
</header>
    <div id="main">
      <article id="post-debug-javascript-typescript" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2018/06/20/debug-javascript-typescript/" class="article-date">
  <time datetime="2018-06-20T12:34:22.000Z" itemprop="datePublished">2018-06-20</time>
</a>
		</span>
		<span class="meta-elements author">Marvin Liu</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 class="article-title entry-title" itemprop="name">
      Debug Javascript/TypeScript
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<h1 id="JavaScript-TypeScript-Debugging"><a href="#JavaScript-TypeScript-Debugging" class="headerlink" title="JavaScript/TypeScript Debugging"></a>JavaScript/TypeScript Debugging</h1><p>Node.js 6.3 introduced the “inspect” and “inspect-brk” CLI arguments that make node to listen via WebSockets for diagnostic commands as defined by the Chrome Debugging Protocol.</p>
<p>Additionally, the Node CLI also provides a “require” argument meant to preload modules (node –require [file]), but most importantly, for debugging purposes, it allows 3rd party libraries to hook into the “require.extensions” module and make Node able to compile and generate source-maps for other languages like TypeScript. For debugging TypeScript we’ll use ts-node. It’s important to remember that in your tsconfig.file , that can be generated by running tsc –init , you should have “sourceMap”: true , which is the default value.</p>
<p>When a Node.js app is started in “inspect” mode, 2 important things will happen:</p>
<ul>
<li>An UUID will be assigned to this debugging session and a WebSockets end-point will spin up at ws://127.0.0.1:9229/[UUID] . This end-point will stream real-time events with the current state of the running code.</li>
<li>An HTTP end-point will spin up at <a href="http://127.0.0.1:9229/json" target="_blank" rel="noopener">http://127.0.0.1:9229/json</a> . This allows agents like the Chrome DevTools to know about every running Node session and their respectiveUUID .</li>
</ul>
<h2 id="With-Chrome-DevTools-for-JavaScript"><a href="#With-Chrome-DevTools-for-JavaScript" class="headerlink" title="With Chrome DevTools for JavaScript"></a>With Chrome DevTools for JavaScript</h2><p>To start application in debug mode:</p>
<ul>
<li><code>node --inspect app.js</code></li>
<li><code>node --inspect-brk=9229 app.js</code> - set debug port to 9229 and add a breakpoint at the first line</li>
</ul>
<p>A Node.js process started without –inspect can also be instructed to start listening for debugging messages:</p>
<ul>
<li><code>node -e &#39;process._debugProcess(30464)&#39;</code> - to attach debugger to a running application(not in inspect mode)</li>
<li><code>kill -SIGUSR1 30464</code></li>
</ul>
<p>Debug in Chrome:</p>
<ul>
<li><code>chrome://inspect</code></li>
<li><code>about:inspect</code></li>
<li><code>Cmd + P</code> to navigate to desired file</li>
</ul>
<h2 id="With-Chrome-DevTools-for-TypeScript"><a href="#With-Chrome-DevTools-for-TypeScript" class="headerlink" title="With Chrome DevTools for TypeScript"></a>With Chrome DevTools for TypeScript</h2><p>Start application with <code>node --inspect --require ts-node/register index.ts</code> and it is the same after that.</p>
<h2 id="With-VSC-for-JavaScript"><a href="#With-VSC-for-JavaScript" class="headerlink" title="With VSC for JavaScript"></a>With VSC for JavaScript</h2><p>Just by selecting the target JavaScript file, clicking on the Debug tab (Shift + Cmd + D on Mac) and hitting the ▶️ button should be enough to start debugging the current JavaScript file even without selecting any launch configuration. VS Code will automatically start Node with the –inspect parameter and attach to it.</p>
<p>You can also very easily create a launch configuration for attaching to a Node process running from the terminal.<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"configurations"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"type"</span>: <span class="string">"node"</span>,</span><br><span class="line">            <span class="attr">"request"</span>: <span class="string">"attach"</span>,</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Attach"</span>,</span><br><span class="line">            <span class="attr">"port"</span>: <span class="number">9229</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>After the configuration is in place, start the application in inspection mode from the terminal.</p>
<h2 id="With-VSC-for-TypeScript"><a href="#With-VSC-for-TypeScript" class="headerlink" title="With VSC for TypeScript"></a>With VSC for TypeScript</h2><p>VS Code, when using a configuration “type”:”node” will not allow the program to be a .ts file (at least as this article is being written), then you’re left with 2 options: You can either run ts-node passing a .ts file as the argument (${relativeFile} returns the currently focused one):</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"configurations"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Current TS File"</span>,</span><br><span class="line">            <span class="attr">"type"</span>: <span class="string">"node"</span>,</span><br><span class="line">            <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">            <span class="attr">"program"</span>: <span class="string">"$&#123;workspaceRoot&#125;/node_modules/.bin/ts-node"</span>,</span><br><span class="line">            <span class="attr">"args"</span>: [<span class="string">"$&#123;relativeFile&#125;"</span>],</span><br><span class="line">            <span class="attr">"protocol"</span>: <span class="string">"inspector"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>or you can specify the runtimeExecutable to be NPM (instead of the default: node) and pass a script name as an argument. Both of them have the exact same effect:<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"configurations"</span>: [</span><br><span class="line">       &#123;</span><br><span class="line">           <span class="attr">"type"</span>: <span class="string">"node"</span>,</span><br><span class="line">           <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">           <span class="attr">"name"</span>: <span class="string">"Launch via NPM"</span>,</span><br><span class="line">           <span class="attr">"runtimeExecutable"</span>: <span class="string">"npm"</span>,</span><br><span class="line">           <span class="attr">"runtimeArgs"</span>: [</span><br><span class="line">               <span class="string">"run-script"</span>,</span><br><span class="line">               <span class="string">"start:debug:ts"</span></span><br><span class="line">           ],</span><br><span class="line">           <span class="attr">"port"</span>: <span class="number">9229</span></span><br><span class="line">       &#125;,</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>alternatively this one should work too:<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"0.2.0"</span>,</span><br><span class="line">  <span class="attr">"configurations"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"node"</span>,</span><br><span class="line">      <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"Launch current file w/ ts-node"</span>,</span><br><span class="line">      <span class="attr">"protocol"</span>: <span class="string">"inspector"</span>,</span><br><span class="line">      <span class="attr">"args"</span>: [<span class="string">"$&#123;relativeFile&#125;"</span>],</span><br><span class="line">      <span class="attr">"cwd"</span>: <span class="string">"$&#123;workspaceRoot&#125;"</span>,</span><br><span class="line">      <span class="attr">"runtimeArgs"</span>: [<span class="string">"-r"</span>, <span class="string">"ts-node/register"</span>],</span><br><span class="line">      <span class="attr">"internalConsoleOptions"</span>: <span class="string">"openOnSessionStart"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>If you want, instead, to attach to a running TypeScript process spawn from a terminal, it is the exact same script we used for pure JavaScript.</p>
<h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><ol>
<li><a href="https://hackernoon.com/debugging-javascript-typescript-node-apps-with-chrome-devtools-vs-code-and-webstorm-97b882aee0ad" target="_blank" rel="noopener">Debugging JavaScript/TypeScript Node apps with Chrome DevTools, VS Code and WebStorm</a></li>
</ol>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
  <div class="article-category">
    <a class="article-category-link" href="/categories/Node-js/">Node.js</a>
  </div>

			</span>
			<span class="tags">
				
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Debug/">Debug</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Node-js/">Node.js</a></li></ul>

			</span>
		</div>
	</footer>
	
    
<nav id="article-nav">
  
  
    <a href="/2018/06/19/nodejs-production-practices/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">
        
          Node.js Production Practices
        
      </div>
    </a>
  
</nav>

  
</article>




    </div>
    <div class="mb-search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:superliuwr.github.io">
  </form>
</div>
<footer id="footer">
	<h1 class="footer-blog-title">
		<a href="/">SUPERLOG</a>
	</h1>
	<span class="copyright">
		&copy; 2018 Marvin Liu<br>
		Modify from <a href="http://sanographix.github.io/tumblr/apollo/" target="_blank">Apollo</a> theme, designed by <a href="http://www.sanographix.net/" target="_blank">SANOGRAPHIX.NET</a><br>
		Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
	</span>
</footer>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
  </div>
</body>
</html>